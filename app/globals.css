@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: 'July Font';
  src: url('https://cdn.jsdelivr.net/gh/Taraldinn/soroborno-cdn@main/public/fonts/July-Font/July-Bold-Italic.ttf') format('truetype');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
  size-adjust: 120%;
}

@font-face {
  font-family: 'July Font';
  src: url('https://cdn.jsdelivr.net/gh/Taraldinn/soroborno-cdn@main/public/fonts/July-Font/July-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
  size-adjust: 120%;
}

@font-face {
  font-family: 'July Font';
  src: url('https://cdn.jsdelivr.net/gh/Taraldinn/soroborno-cdn@main/public/fonts/July-Font/July-Italic.ttf') format('truetype');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
  size-adjust: 120%;
}

@font-face {
  font-family: 'July Font';
  src: url('https://cdn.jsdelivr.net/gh/Taraldinn/soroborno-cdn@main/public/fonts/July-Font/July-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
  size-adjust: 120%;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;

    /* Brand Colors - RNPL */
    /* Turquoise colors are brand colors */
    --color-white: 0 0% 100%;
    --color-white-smoke: 0 0% 97%;
    --color-ghost-white: 210 17% 98%;
    --color-light-gray: 210 14% 83%;
    --color-dark-orchid: 261 51% 51%;
    --color-brand: 196 60% 56%;
    /* Brand color */
    --color-brand-hover: 196 60% 50%;
    /* Brand color hover */
    --color-brand-alt: 197 60% 56%;
    /* Brand color */
    --color-crimson: 354 70% 54%;
    --color-deep-pink: 332 79% 58%;
    --color-blue-violet: 263 90% 51%;
    --color-pure-red: 0 100% 50%;
    --color-orange: 27 98% 54%;
    --color-golden-yellow: 45 100% 51%;
    --color-royal-blue: 211 100% 50%;
    --color-slate-gray: 208 7% 46%;
    --color-lime-green: 134 61% 41%;
    --color-lime-green-1: 98 42% 46%;
    --color-light-sea-green: 188 78% 41%;
    --color-light-sea-green-1: 162 73% 46%;
    --color-charcoal: 210 10% 23%;
    --color-dark-gray: 210 11% 15%;
    --color-dark-gray-1: 30 3% 15%;
    --color-black: 0 0% 0%;
    --color-black-1: 0 0% 1%;

    /* Rainbow colors for Magic UI rainbow button */
    --color-1: #ff0080;
    --color-2: #ff8c00;
    --color-3: #40e0d0;
    --color-4: #ff0080;
    --color-5: #ff8c00;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-inter), 'July Font', sans-serif;
  }

  /* Serif font for official documents */
  .font-serif {
    font-family: var(--font-playfair), serif;
  }

  .font-cursive {
    font-family: var(--font-cursive), cursive;
  }

  /* Bangla and UI fonts - Ensure Inter is prioritized for English characters */
  .font-bangla {
    font-family: var(--font-inter), 'July Font', sans-serif;
  }

  .font-bangla-serif {
    font-family: var(--font-inter), var(--font-noto-serif-bengali), serif;
  }

  .font-mina {
    font-family: var(--font-inter), var(--font-mina), sans-serif;
  }

  .font-mono {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  }
}

/* Custom Scrollbar for Notification Popover */
.notification-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.notification-scrollbar::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 10px;
}

.notification-scrollbar::-webkit-scrollbar-thumb {
  background: hsl(220, 13%, 70%);
  border-radius: 10px;
}

.notification-scrollbar::-webkit-scrollbar-thumb:hover {
  background: hsl(0, 0%, 80%);
}

.notification-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: hsl(0, 4%, 84%) transparent;
}

/* Custom Scrollbar for general use */
.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: hsl(var(--color-ghost-white));
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: hsl(var(--color-light-gray));
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--color-slate-gray));
}

.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--color-light-gray)) transparent;
}

/* TipTap Editor Styles */
.ProseMirror {
  outline: none;
}

.ProseMirror table {
  border-collapse: collapse;
  table-layout: fixed;
  width: 100%;
  margin: 0;
  overflow: hidden;
}

.ProseMirror td,
.ProseMirror th {
  min-width: 1em;
  border: 2px solid hsl(var(--color-light-gray));
  padding: 3px 5px;
  vertical-align: top;
  box-sizing: border-box;
  position: relative;
}

.ProseMirror th {
  font-weight: bold;
  text-align: left;
  background-color: hsl(var(--color-ghost-white));
}

.ProseMirror .selectedCell:after {
  z-index: 2;
  position: absolute;
  content: "";
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(200, 200, 255, 0.4);
  pointer-events: none;
}

.ProseMirror .column-resize-handle {
  position: absolute;
  right: -2px;
  top: 0;
  bottom: 0;
  width: 4px;
  background-color: #adf;
  pointer-events: none;
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: hsl(var(--color-slate-gray));
  pointer-events: none;
  height: 0;
}

/* Ensure placeholder updates when data-placeholder attribute changes */
.ProseMirror[data-placeholder] p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
}

.ProseMirror p {
  margin: 0.5em 0;
}

.ProseMirror p:first-child {
  margin-top: 0;
}

.ProseMirror p:last-child {
  margin-bottom: 0;
}

.ProseMirror strong {
  font-weight: 600;
}

.ProseMirror em {
  font-style: italic;
}

.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5em;
  margin: 0.5em 0;
}

/* Table styles for document preview (scoped to document content only) */
.font-bangla table {
  width: 100%;
  border-collapse: collapse;
  margin: 1em 0;
  table-layout: fixed;
}

.font-bangla table td,
.font-bangla table th {
  min-width: 1em;
  border: 1px solid hsl(var(--color-light-gray));
  padding: 0.5em 0.75em;
  vertical-align: top;
  box-sizing: border-box;
}

.font-bangla table th {
  font-weight: 600;
  text-align: left;
  background-color: hsl(var(--color-ghost-white));
}

.font-bangla table p {
  margin: 0.25em 0;
}

.font-bangla table p:first-child {
  margin-top: 0;
}

.font-bangla table p:last-child {
  margin-bottom: 0;
}

.ProseMirror ul {
  list-style-type: disc;
}

.ProseMirror ol {
  list-style-type: decimal;
}

.ProseMirror li {
  margin: 0.25em 0;
}

.ProseMirror h1,
.ProseMirror h2,
.ProseMirror h3,
.ProseMirror h4,
.ProseMirror h5,
.ProseMirror h6 {
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
}

.ProseMirror h1 {
  font-size: 1.5em;
}

.ProseMirror h2 {
  font-size: 1.25em;
}

.ProseMirror h3 {
  font-size: 1.125em;
}

.ProseMirror code {
  background-color: hsl(var(--color-ghost-white));
  padding: 0.125em 0.25em;
  border-radius: 0.25em;
  font-size: 0.875em;
}

.ProseMirror blockquote {
  border-left: 3px solid hsl(var(--color-light-gray));
  padding-left: 1em;
  margin: 1em 0;
  color: hsl(var(--color-slate-gray));
}

/* TipTap Toolbar Button Active State */
button[data-active="true"] {
  background-color: hsl(var(--color-ghost-white));
  color: hsl(var(--color-brand));
}

/* Recharts Focus Fix - Remove unwanted focus outlines from charts */
.recharts-wrapper,
.recharts-surface,
.recharts-layer,
.recharts-sector,
.recharts-curve,
.recharts-dot,
.recharts-active-dot,
.recharts-default-tooltip {
  outline: none !important;
  box-shadow: none !important;
  border: none !important;
}

/* Aggressive reset for all elements within the chart wrapper */
.recharts-wrapper * {
  outline: none !important;
  box-shadow: none !important;
}

/* Ensure SVGs in general don't show focus outline when clicked */
svg:focus,
svg:focus-visible,
svg:active {
  outline: none !important;
  box-shadow: none !important;
}

/* Specific fix for Recharts surface which receives tabindex="0" */
svg.recharts-surface:focus,
svg.recharts-surface:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* File Viewer Tabs - Custom indicator alignment */
.file-viewer-tabs [role="tablist"] {
  position: relative;
}

.file-viewer-tabs [role="tab"] {
  position: relative;
}

.file-viewer-tabs [role="tab"]::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background-color: transparent;
  transition: background-color 200ms;
}

.file-viewer-tabs [role="tab"][data-state="active"]::after {
  background-color: hsl(var(--color-brand));
  bottom: -1px;
}

/* Bengali numbering for ordered lists in editor */
.editor-bangla .ProseMirror ol {
  list-style-type: bengali;
}

.editor-english .ProseMirror ol {
  list-style-type: decimal;
}

/* Better spacing for list items for improved scannability */
.ProseMirror ul li,
.ProseMirror ol li {
  margin-bottom: 0.75em;
}

.ProseMirror ul li:last-child,
.ProseMirror ol li:last-child {
  margin-bottom: 0;
}
/* Ensure list markers inherit text color */
.ProseMirror ul li::marker,
.ProseMirror ol li::marker {
  color: inherit;
}

/* Apply same styles to document preview */
.font-bangla ul,
.font-bangla ol {
  padding-left: 1.5em;
  margin: 0.5em 0;
}

.font-bangla ul li,
.font-bangla ol li {
  margin-bottom: 0.75em;
}

.font-bangla ul li:last-child,
.font-bangla ol li:last-child {
  margin-bottom: 0;
}

.font-bangla ul {
  list-style-type: disc;
}

.font-bangla ol {
  list-style-type: bengali;
}

/* Ensure markers inherit color in preview too */
.font-bangla ul li::marker,
.font-bangla ol li::marker {
  color: inherit;
}

/* Headings in preview */
.font-bangla h1,
.font-bangla h2,
.font-bangla h3 {
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
}

.font-bangla h1 {
  font-size: 1.5em;
}

.font-bangla h2 {
  font-size: 1.25em;
}

.font-bangla h3 {
  font-size: 1.125em;
}

/* Text formatting in preview */
.font-bangla strong {
  font-weight: 600;
}

.font-bangla em {
  font-style: italic;
}

.font-bangla u {
  text-decoration: underline;
}

/* Blockquotes in preview */
.font-bangla blockquote {
  border-left: 3px solid hsl(var(--color-light-gray));
  padding-left: 1em;
  margin: 1em 0;
  color: hsl(var(--color-slate-gray));
}

/* Force list markers to match list item text color - more aggressive approach */
.ProseMirror ul li,
.ProseMirror ol li {
  color: inherit;
}

.ProseMirror ul li > *,
.ProseMirror ol li > * {
  color: inherit;
}

/* When text has inline color, apply to li as well */
.ProseMirror li[style*="color"],
.ProseMirror li span[style*="color"] {
  display: inherit;
}

/* Make markers follow the text color by ensuring li inherits color from parent */
.ProseMirror ul,
.ProseMirror ol {
  color: inherit;
}
/* Override the previous approach - use CSS custom property workaround */
.ProseMirror ul li,
.ProseMirror ol li {
  /* Store the text color */
  --list-item-color: currentColor;
}

.ProseMirror ul li::marker,
.ProseMirror ol li::marker {
  color: var(--list-item-color, currentColor);
}

/* When color is applied to child elements, propagate to marker */
.ProseMirror li > [style*="color"] {
  display: list-item;
  list-style-position: outside;
}
/* Simpler approach: Force li to inherit color from any styled child */
.ProseMirror li:has([style*="color"]) {
  color: inherit;
}

/* Then ensure markers use the li color */
.ProseMirror ul li::marker,
.ProseMirror ol li::marker {
  color: currentColor !important;
}

/* Make the p tag inside li pass color up */
.ProseMirror li > p[style*="color"] {
  display: contents;
}
